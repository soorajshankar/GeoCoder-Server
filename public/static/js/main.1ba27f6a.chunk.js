(window["webpackJsonpgoogle-maps"]=window["webpackJsonpgoogle-maps"]||[]).push([[0],{142:function(e,t,n){e.exports=n(300)},147:function(e,t,n){},298:function(e,t,n){},300:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(4),c=n.n(o),i={isMapLoaded:!1,mapInstance:null,markers:[],mapLoaded:function(){i.isMapLoaded=!0},setMapObject:function(e){i.mapInstance=e},addMarker:function(e){i.markers.push(e)},removeMarker:function(e){},removeAllMarkers:function(){for(var e=0;e<i.markers.length;e++)i.markers[e]&&i.markers[e].setMap(null)},setMapOnAll:function(e){for(var t=0;t<i.markers.length;t++)i.markers[t]&&i.markers[t].setMap(e)},editMarker:function(e){}},s=r.a.createContext({}),l=(n(147),n(60)),u=n(61),m=n(62),d=n(66),p=n(63),f=n(67),E={EDIT_MODE:"EDIT_MODE",NORMAL_MODE:"NORMAL_MODE",ADD_MODE:"ADD_MODE"},O="ADD_MODE",v={lat:52.527744,lng:13.24112},k=function(e){return r.a.createElement("div",{className:"c-mapview ".concat(e.viewMode===(E.EDIT_MODE||E.ADD_MODE\u00ce)?"c-mapview--expanded":"c-mapview--collapse")},e.children)},M=function(e){return r.a.createElement("div",{className:"c-sideview ".concat(e.viewMode===(E.EDIT_MODE||E.ADD_MODE)?"c-sideview--collapse":"c-sideview--expanded")},e.children)},g=function(e){return new window.google.maps.Map(document.getElementById("map"),{zoom:12,center:e,mapTypeId:"terrain"})},h=function(e,t){return e.map(function(e,n){var a=new window.google.maps.Marker({position:{lat:e.lat,lng:e.lng},map:t});return a.addListener("click",function(){new window.google.maps.InfoWindow({content:b(e)}).open(t,a)}),a})},b=function(e){var t=e.name,n=e.lat,a=e.lng;return'<div id="content"><h3 id="firstHeading" class="firstHeading">'.concat(t,"</h3><p>lat : ").concat(n,"</p><p>lng : ").concat(a,"</p></div>")},w=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_BASE_SERVICE_URL||"",D="GOOGLE",j={GOOGLE_MAP_API_KEY:"AIzaSyAMQ_lokx5I3FFYafAuC1B2VcxCIuX13Gs",serviceUrls:{marker:"".concat(w,"/api/markers"),geoCoder:"".concat(w,"/api/geoCoder")}},y=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e))).initMap=function(){n.setState({isMapLoaded:!0});var e=n.props,t=e.focusLocation,a=e.markers;window.google&&(n.context.mapInstance=g(t),n.context.removeAllMarkers(),n.context.markers=h(a,n.context.mapInstance))},n.state={isMapLoaded:!1},n}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){window.initMap=this.initMap,function(e){var t=window.document.getElementsByTagName("script")[0],n=window.document.createElement("script");n.src=e,n.async=!0,t&&t.parentNode.insertBefore(n,t)}(function(e,t){switch(t){case D:default:return"https://maps.googleapis.com/maps/api/js?key=".concat(e,"&callback=initMap")}}(this.props.apiKey,D))}},{key:"componentDidUpdate",value:function(e){if(this.props.markers!==e.markers){var t=this.props.markers;this.context.mapInstance&&(window.mapppp=this.context.mapInstance,this.context.removeAllMarkers(),this.context.markers=h(t,this.context.mapInstance))}Object.is(this.props.focusLocation,e.focusLocation)||this.context.mapInstance&&this.context.mapInstance.setCenter(this.props.focusLocation)}},{key:"render",value:function(){var e=this.state.isMapLoaded;return r.a.createElement(r.a.Fragment,null,!e&&r.a.createElement(_,null),r.a.createElement("div",{id:"map"}))}}]),t}(a.PureComponent);y.contextType=s;var _=function(){return r.a.createElement("div",{className:"c-loading"},"Loading...")},A=function(e){var t=e.onRemove,n=e.onEdit;return r.a.createElement("div",{className:"c-list"},e.markers&&e.markers.map(function(a,o){return r.a.createElement("article",{key:o,className:"c-list__card"},r.a.createElement("header",{className:"cursor-zoom",onClick:function(){return e.onItemClick(a)}},a.name),r.a.createElement("p",null,"lat :",a.lat),r.a.createElement("p",null,"lng :",a.lng),r.a.createElement("footer",null,r.a.createElement("button",{onClick:function(){return n(a,o)}},"Edit"),r.a.createElement("span",null,"or"),r.a.createElement("button",{onClick:function(){return t(a,o)}},"Remove")))}))},C=function(e){var t=e.onClick;return r.a.createElement("div",{className:"c-add-marker"},r.a.createElement("button",{className:"c-add-marker__btn",onClick:t},"Add Marker"))},I=n(40),L=n.n(I),S=j.serviceUrls,N=function(e){return L.a.get("".concat(S.geoCoder,"/").concat(e))},P=function(e){return L.a.post(S.marker,e)},x=function(e){return L.a.put("".concat(S.marker,"/").concat(e._id),e)},R=function(e){return L.a.delete("".concat(S.marker,"/").concat(e._id))},T=n(23),B=n(305),G=n(301),K=n(302),U=n(304),V=n(24),F=n(306),z=function(e){var t=Object(a.useState)(void 0),n=Object(T.a)(t,2),o=n[0],c=n[1],i=Object(a.useState)([]),s=Object(T.a)(i,2),l=s[0],u=s[1],m=Object(a.useState)(void 0),d=Object(T.a)(m,2),p=d[0],f=d[1],E=Object(a.useState)(!1),O=Object(T.a)(E,2),v=O[0],k=O[1],M=function(){o&&e.searchAddress(o).then(function(e,t){k(!1),t||(u(e.data.data||[]),f(e.data.data&&e.data.data.length?void 0:"No Results found"))}),k(!0)};return r.a.createElement(B.a,{className:"find-address",title:"Add Marker",visible:!0,onOk:function(){return console.log("OK")},onCancel:e.onClose,footer:[null]},r.a.createElement(G.a,null,r.a.createElement(K.a,{span:19},r.a.createElement(U.a,{placeholder:"Search address here..",value:o,onChange:function(e){return c(e.target.value)},onKeyDown:function(e){return"Enter"==e.key&&M()}})),r.a.createElement(K.a,{span:5},r.a.createElement(V.a,{type:"primary",icon:v&&"loading",onClick:M},"Search"))),r.a.createElement(G.a,{className:"search-list"},l.map(function(t,n){return r.a.createElement("article",{key:n,className:"c-list__card"},r.a.createElement("header",null,t.name),r.a.createElement("p",null,"lat :",t.lat),r.a.createElement("p",null,"lng :",t.lng),r.a.createElement("footer",null,r.a.createElement("button",{onClick:function(){return e.onSubmit(t)}},"Add to Map")))}),p&&r.a.createElement(F.a,{type:"warning",message:p})))},W=n(303);function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var H=function(e){var t=Object(a.useState)(e.marker.name||void 0),n=Object(T.a)(t,2),o=n[0],c=n[1],i=Object(a.useState)(e.marker.lat),s=Object(T.a)(i,2),u=s[0],m=s[1],d=Object(a.useState)(e.marker.lng),p=Object(T.a)(d,2),f=p[0],E=p[1],v=Object(a.useState)(void 0),k=Object(T.a)(v,2),M=k[0],g=k[1],h=e.marker,b=e.mode;return r.a.createElement(B.a,{title:b===O?"Add Marker":"Edit Marker",visible:!0,onOk:function(){return o&&u&&f?e.onSubmit(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(n,!0).forEach(function(t){Object(l.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},h,{name:o,lat:Number(u),lng:Number(f)})):g("Please check all the fields!")},onCancel:e.onCancel},r.a.createElement(W.a.Item,{label:"Name"},r.a.createElement(U.a,{placeholder:"Name this marker",value:o,onChange:function(e){return c(e.target.value)}})),r.a.createElement(W.a.Item,{label:"Latitude"},r.a.createElement(U.a,{value:u,onChange:function(e){return m(e.target.value)}})),r.a.createElement(W.a.Item,{label:"Longitude",er:!0},r.a.createElement(U.a,{value:f,onChange:function(e){return E(e.target.value)}})),M&&r.a.createElement(F.a,{message:M,type:"error"}))};function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(n,!0).forEach(function(t){Object(l.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var X=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e))).addToMarkers=function(e){P(e).then(function(e){200===e.status&&n.setState({markers:e.data,viewMode:E.NORMAL_MODE})}).catch(function(e){return console.error("Axios Error :",e)})},n.onRemoveMarker=function(e,t){R(e).then(function(e){200===e.status&&n.setState({markers:e.data})}).catch(function(e){return console.error("Axios Error :",e)})},n.onEditMarker=function(e,t){n.setState({viewMode:E.EDIT_MODE,edittingMarker:Q({index:t},e)})},n.onEditConfirm=function(e){x(e).then(function(e){200===e.status&&n.setState({markers:e.data,edittingMarker:void 0,viewMode:E.NORMAL_MODE})}).catch(function(e){return console.error("Axios Error :",e)})},n.toggleViewMode=function(){return n.setState({viewMode:E.ADD_MODE})},n.onItemClick=function(e){return n.setState({focusLoc:e})},n.state={markers:[],edittingMarker:void 0,viewMode:E.NORMAL_MODE,focusLoc:v},n}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;L.a.get(S.marker).then(function(t){200===t.status&&e.setState({markers:t.data||[],focusLoc:t.data[0]||v})}).catch(function(e){return console.error("Axios Error :",e)})}},{key:"render",value:function(){var e=this,t=this.state,n=t.markers,a=t.edittingMarker,o=t.viewMode,c=t.focusLoc;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"c-layout"},r.a.createElement(k,{viewMode:o},r.a.createElement(y,{apiKey:j.GOOGLE_MAP_API_KEY,focusLocation:c,markers:n,viewMode:o})),r.a.createElement(M,{viewMode:o},r.a.createElement(C,{onClick:function(){return e.toggleViewMode()}}),r.a.createElement(A,{markers:n,onRemove:this.onRemoveMarker,onEdit:this.onEditMarker,onItemClick:this.onItemClick})),o===E.ADD_MODE&&r.a.createElement(z,{searchAddress:N,onClose:function(){return e.setState({viewMode:E.NORMAL_MODE})},onSubmit:this.addToMarkers}),o===E.EDIT_MODE&&a&&r.a.createElement(H,{marker:a,onSubmit:this.onEditConfirm,onCancel:function(){return e.setState({viewMode:E.NORMAL_MODE,edittingMarker:void 0})}})))}}]),t}(a.Component);n(298),n(299);var $=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(X,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(s.Provider,{value:i},r.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[142,1,2]]]);
//# sourceMappingURL=main.1ba27f6a.chunk.js.map